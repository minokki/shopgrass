<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments-main.html :: index-head">
</head>
<body>

<div th:replace="fragments-main.html :: nav" class="navbar"></div>


<div id="carouselControls" class="carousel slide margin" data-ride="carousel" style="height: 300px">
  <div class="carousel-inner">
    <div class="carousel-item active item">
      <img class="d-block w-100 banner" src="/img/eeeee.jpg" alt="First slide">
    </div>
  </div>
</div>

<div class="container" style="margin-top: 3%; overflow: hidden;">
  <h1> SHOP</h1>
  <form class="form-inline my-2 my-lg-0" th:action="@{/item/items}" method="get">
    <div class="input-group">
      <input name="searchQuery" class="form-control" type="search" placeholder="Search" aria-label="Search">
      <div class="input-group-append">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </div>
    </div>
  </form>

<div class="row">
  <th:block th:each="item, status: ${items.getContent()}">
    <div class="col-md-4 margin">
      <div class="card">
        <a th:href="'/item/' +${item.id}" class="text-dark">
          <img th:src="${item.imgUrl}" class="card-img-top" th:alt="${item.itemNm}" height="300">
          <div class="card-body">
            <h4 class="card-title">[[${item.itemNm}]]</h4>
            <p class="card-text">[[${item.itemDetail}]]</p>
            <h3 class="card-title text-danger">[[${item.price}]]원</h3>
          </div>
        </a>
      </div>
    </div>
  </th:block>
</div>

<div th:with="start=${(items.number/maxPage)*maxPage + 1}, end=(${(items.totalPages == 0) ? 1 : (start + (maxPage - 1) < items.totalPages ? start + (maxPage - 1) : items.totalPages)})" >
  <ul class="pagination justify-content-center">

    <li class="page-item" th:classappend="${items.number eq 0}?'disabled':''">
      <a th:href="@{'/item/items' + '?searchQuery=' + (${itemSearchDto.searchQuery} ?: '') + '&page=' + ${items.number-1}}" aria-label='Previous' class="page-link">
        <span aria-hidden='true'>Previous</span>
      </a>
    </li>

    <li class="page-item" th:each="page: ${#numbers.sequence(start, end)}" th:classappend="${items.number eq page-1}?'active':''">
      <a th:href="@{'/item/items' +'?searchQuery=' + (${itemSearchDto.searchQuery} ?: '') + '&page=' + ${page-1}}" th:inline="text" class="page-link">[[${page}]]</a>
    </li>

    <li class="page-item" th:classappend="${items.number+1 ge items.totalPages}?'disabled':''">
      <a th:href="@{'/item/items' +'?searchQuery=' + (${itemSearchDto.searchQuery} ?: '') + '&page=' + ${items.number+1}}" aria-label='Next' class="page-link">
        <span aria-hidden='true'>Next</span>
      </a>
    </li>

  </ul>
</div>
</div>

<div style="position: fixed; bottom: 5%; right: 20%;">
  <!-- "글작성" 버튼 -->
  <form class="needs-validation col-12" action="#" th:action="@{/admin/item/new}">
    <button class="btn btn-primary btn-block" type="submit">글작성</button>
  </form>
</div>

<footer>

  <ul class="footer_const">
    <li>시행 <span>고팡</span></li>
    <li>시공 <span>벌초박사</span></li>
  </ul>
  <p>홈페이지에 사용된 CG 및 이미지 컷은 소비자의 이해를 돕기위한 것으로 사업과정 및 실제 시공에 따라 변경될 수 있습니다.<br>본 홈페이지는 옥동 경남아너스빌 ubc 공식홈페이지입니다.<br>온라인대행. (주)로빈스앤컴퍼니&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;서울특별시 강남구 학동로97길 43-5(청담동)&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;대표. 강명훈&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;등록번호. 220-86-53288</p>
  <h6>2022 POWERED BY Robins &amp; Company. ALL RIGHT RESERVED.</h6>
  <img src="" alt="" class="main_footer_bg">
</footer>
</body>
</html>